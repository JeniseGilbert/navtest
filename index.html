<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding RSVP</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Playfair+Display:wght@500;700&family=Open+Sans&display=swap" rel="stylesheet">

  <style>
    :root {
      --sage: #9caf88;
      --cream: #fffae8;
      --tan: #f8f5f2;
      --brown: #4c3b33;
      --deepbrown: #704728;
    }
    
    
    header {
      position: sticky;
      top: 0;
      background-color: rgba(0, 0, 0, 0.9);
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      flex-wrap: nowrap;
      overflow-x: auto;
      white-space: nowrap;
    }
    .topnav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: rgba(0, 0, 0, 0.9);
      padding: 15px 20px;
      position: sticky;
      top: 0;
      z-index: 1000;
      flex-wrap: wrap;
    }

    .logo {
      font-family: 'Cinzel', cursive;
      font-size: 20px;
      color: var(--cream);
      text-decoration: none;
      flex-shrink: 0;
    }

    .icon {
      display: block;
      cursor: pointer;
      margin-left: auto;
    }

    .icon div {
      width: 25px;
      height: 3px;
      background-color: var(--cream);
      margin: 5px 0;
    }

    #myLinks {
      display: none;
      flex-direction: column;
      background-color: rgba(0, 0, 0, 0.95);
      position: absolute;
      right: 20px;
      top: 60px;
      width: auto;
      min-width: 150px;
      border-radius: 8px;
      box-shadow: 0 0 10px var(--sage);
    }

    #myLinks a {
      color: var(--sage);
      padding: 12px 16px;
      text-decoration: none;
      font-size: 17px;
      display: block;
      font-family: 'Cinzel', serif;
    }

    #myLinks a:hover {
      background-color: var(--sage);
      color: white;
    }
    
    #myLinks.show {
  display: block;
}


    @media (min-width: 769px) {
      .icon {
        display: none;
      }

      #myLinks {
        display: flex !important;
        flex-direction: row;
        position: static;
        width: auto;
        background: none;
        box-shadow: none;
      }

      #myLinks a {
        padding: 0 15px;
      }
    }
    
    body {
      font-family: 'Open Sans', sans-serif;
      background: #000;
      color: var(--cream);
      margin: 0;
      padding: 0;
    
    }
    
    .container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 40px 20px;
}

    form {
      background: #111;
      color: var(--cream);
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 0 15px var(--cream);
      width: 100%;
      max-width: 600px;
    }
    h2, p {
      font-family: 'Playfair Display', serif;
      color: var(--cream);
      text-align: center;
    }
    h2 {
      font-size: 32px;
      margin-bottom: 20px;
    }
    p {
      font-size: 18px;
      margin-bottom: 20px;
    }
    label {
      margin-top: 15px;
      display: block;
      font-size: 16px;
      color: var(--cream);
    }
    input, select, textarea {
      display: block;
      width: 100%;
      margin-bottom: 15px;
      padding: 12px;
      background: var(--cream);
      color: black;
      border: 1px solid var(--cream);
      box-shadow: 0 0 8px var(--cream);
      border-radius: 8px;
      font-size: 16px;
    }
    button {
      padding: 12px 20px;
      background-color: var(--cream);
      color: black;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: box-shadow 0.3s ease, background-color 0.3s ease;
      box-shadow: 0 0 12px var(--sage);
    }
    button:hover {
      background-color: var(--cream);
      box-shadow: 0 0 20px var(--sage);
    }
    .back-button {
  background-color: transparent;
  color: var(--cream);
  border: 2px solid var(--cream);
  margin-top: 10px;
  margin-bottom: 20px;
  padding: 10px 18px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-button:hover {
  background-color: var(--cream);
  color: black;
  box-shadow: 0 0 10px var(--sage);
}

    .hidden {
      display: none;
    }
    
    .guest-section {
      background: #1a1a1a;
      padding: 50px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px var(--cream);
    }
    .message {
      text-align: center;
      font-size: 20px;
      color: var(--cream);
    }
    .radio-group {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
    }
    .radio-option {
      display: flex;
      align-items: center;
      font-size: 16px;
    }
    .radio-option input[type="radio"] {
      appearance: none;
      width: 16px;
      height: 16px;
      border: 2px solid var(--cream);
      border-radius: 50%;
      margin-right: 8px;
      position: relative;
    }
    .radio-option input[type="radio"]:checked::before {
      content: "";
      position: absolute;
      top: 4px;
      left: 4px;
      width: 16px;
      height: 16px;
      background-color: var(--sage);
      border-radius: 50%;
    }
    .loader {
      border: 16px solid #f3f3f3;
      border-top: 16px solid var(--sage);
      border-radius: 50%;
      width: 80px;
      height: 80px;
      animation: spin 2s linear infinite;
      margin: 20px auto 0 auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .calendar-button {
  display: inline-block;
  background: var(--cream);
  color: black;
  padding: 10px 20px;
  margin: 10px auto;
  border-radius: 6px;
  font-size: 16px;
  text-decoration: none;
  box-shadow: 0 0 10px var(--sage);
  transition: 0.3s ease;
}
.calendar-button:hover {
  background: var(--sage);
  color: white;
}

.footer .rights {
      font-size: 14px;
      font-family: 'Cinzel', serif;
      color: #bbb;
      margin-top: 30px;
      text-align: center;
    }

  </style>
</head>
<body>
  <div class="topnav">
    <a href="index.html" class="logo">June 21, 2025</a>
    <div class="icon" onclick="myFunction()">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <div id="myLinks">
      <a href="index.html">Home</a>
      <a href="schedule.html">Schedule</a>
      <a href="lodging.html">Lodging</a>
      <a href="registry.html">Registry</a>
      <a href="rsvp.html">RSVP</a>
    </div>
  </div>

    

  
  <div class="container">
  <form id="rsvpForm">
    <div id="page1">
      <h2>You're Invited</h2>
      <p>Please RSVP below:</p>
      <label>First Name</label>
      <input type="text" name="firstName" required>
      <label>Last Name</label>
      <input type="text" name="lastName" required>
      <label>Will you attend?</label>
      <div class="radio-group">
        <label class="radio-option"><input type="radio" name="attendance" value="Yes" required> Yes</label>
        <label class="radio-option"><input type="radio" name="attendance" value="No"> No</label>
      </div>
      <button type="button" onclick="handleFirstPage()">Next</button>
    </div>
 
    <div id="page2" class="hidden">
      <h2>Guest Information</h2>
      <label>Phone Number</label>
      <input type="text" name="phone" required>
      <label>Your Entree</label>
      <select name="meal">
        <option value="" disabled selected>-- Select an entree --</option>
        <option>Oxtail</option>
        <option>Curry Goat</option>
        <option>Stew Chicken</option>
        <option>Salmon (reserved for pescatarian guests)</option>
        <option>No entree</option>
      </select>
      <label>Your Rice</label>
      <select name="rice">
        <option value="" disabled selected>-- Select a rice option --</option>
        <option>Rice and Peas</option>
        <option>Plain White Rice</option>
        <option>No Rice</option>
      </select>
      <label>Your Vegetable</label>
      <select name="vegetables">
        <option value="" disabled selected>-- Select a vegetable option --</option>
        <option>Cabbage, carrots, and green beans</option>
        <option>No vegetables</option></option>
      </select>
      

      <label>Number of guests accompanying you? (max 4)</label>
      <input type="number" name="guestCount" min="0" max="4" onchange="renderGuestFields(this.value)">

      <div id="guestFields"></div>
      <button type="button" class="back-button" onclick="goBackToPage1()">Back</button>
      <button type="submit">Submit</button>
    </div>
    
  
  
    <div id="thankYou" class="hidden message">Thank you! Your RSVP has been submitted.
    <strong>Add to your calendar:</strong><br><br>
  <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Gisselle+Wedding&dates=20250621T230000Z/20250622T050000Z&details=Join+us+in+celebration!&location=Baytown,+TX" 
     target="_blank" class="calendar-button">Add to Google Calendar</a><br><br>
  <a href="https://jenisegilbert.github.io/lywoodwedding/lywoodwedding.ics" download="lywoodwedding.ics" class="calendar-button">Add to Outlook/iPhone Calendar</a></div>
     <div style="text-align: center; margin-top: 30px;">
  <a href="index.html"
     style="
       display: inline-block;
       background-color: var(--cream);
       color: black;
       padding: 12px 20px;
       border: none;
       border-radius: 8px;
       font-size: 16px;
       font-family: 'Open Sans', sans-serif;
       text-decoration: none;
       box-shadow: 0 0 12px var(--sage);
       transition: background-color 0.3s ease, box-shadow 0.3s ease;
     "
     onmouseover="this.style.backgroundColor='#e9e3cc'; this.style.boxShadow='0 0 20px var(--sage)';"
     onmouseout="this.style.backgroundColor='var(--cream)'; this.style.boxShadow='0 0 12px var(--sage)';">
    ← Back to Website
  </a>
</div>


    <div id="sorry" class="hidden message">Thank you for informing us. We understand and will miss you.
    You can still be part of the ceremony via our livestream:<br><br>
  <a href="https://www.youtube.com/your-stream-link" target="_blank" class="calendar-button">Watch on YouTube</a><br><br>
  <iframe width="100%" height="315" src="https://www.youtube.com/embed/YOUR_STREAM_ID" frameborder="0" allowfullscreen></iframe>
  <a href="index.html"
   class="info-button"
   style="
     display: block;
     margin: 30px auto 0;
     background-color: transparent;
     border: 2px solid #9caf88;
     color: #9caf88;
     padding: 12px 28px;
     border-radius: 8px;
     font-size: 18px;
     font-weight: bold;
     text-decoration: none;
     transition: all 0.3s ease;
     margin-top: 30px;
     display: block;
     
   "
   onmouseover="this.style.backgroundColor='#9caf88'; this.style.color='white';"
   onmouseout="this.style.backgroundColor='transparent'; this.style.color='#9caf88';">
  ← Back to Website
</a>
</div></div>
    <div id="loading" class="hidden message">Please wait...
      <div class="loader"> </div>
  </form>
</div>

<div class="footer">
    <div class="rights">&copy; 2025 Junior and Gisselle. All rights reserved.</div>
  </div>
  <!-- Near the bottom of your HTML, inside the <script> tag -->
<script>
  function handleFirstPage() {
    const attendance = document.querySelector('input[name="attendance"]:checked')?.value;
    const firstName = document.querySelector('input[name="firstName"]').value;
    const lastName = document.querySelector('input[name="lastName"]').value;

    if (attendance === "Yes") {
      document.getElementById("page1").classList.add("hidden");
      document.getElementById("page2").classList.remove("hidden");
    } else {
      submitForm({ firstName, lastName, attendance });
    }
  }

  function submitForm(data) {
    document.getElementById("page1").classList.add("hidden");
    document.getElementById("loading").classList.remove("hidden");

    google.script.run
      .withSuccessHandler(() => {
        document.getElementById("loading").classList.add("hidden");
        document.getElementById("sorry").classList.remove("hidden");
      })
      .withFailureHandler(() => {
        document.getElementById("loading").classList.add("hidden");
        alert("Something went wrong. Please try again later.");
      })
      .submitRSVP(data);
  }

  function renderGuestFields(count) {
    const container = document.getElementById("guestFields");
    container.innerHTML = '';
    for (let i = 1; i <= count; i++) {
      container.innerHTML += `
        <div class="guest-section">
          <h4>Guest ${i}</h4>
          <label>Name</label>
          <input type="text" name="guestName${i}" required>
          <label>Entree</label>
          <select name="guestMeal${i}">
            <option value="" disabled selected>-- Select an entree --</option>
            <option>Oxtail</option>
            <option>Curry Goat</option>
            <option>Stew Chicken</option>
            <option>Salmon (reserved for pescatarian guests)</option>
            <option>No entree</option>
          </select>
          <label>Rice</label>
          <select name="guestRice${i}">
            <option value="" disabled selected>-- Select a rice option --</option>
            <option>Rice and Peas</option>
            <option>Plain White Rice</option>
            <option>No Rice</option>
          </select>
          <label>Vegetables</label>
          <select name="guestVegetable${i}">
            <option value="" disabled selected>-- Select a vegetable option --</option>
            <option>Cabbage, carrots, and green beans</option>
            <option>No vegetables</option>
          </select>
        </div>
      `;
    }
  }

  document.getElementById("rsvpForm").addEventListener("submit", function(e) {
    e.preventDefault();
    document.getElementById("loading").classList.remove("hidden");

    const form = e.target;
    const guestCount = parseInt(form.guestCount?.value || 0);
    const data = {
      firstName: form.firstName?.value || '',
      lastName: form.lastName?.value || '',
      attendance: form.attendance?.value || '',
      phone: form.phone?.value || '',
      meal: form.meal?.value || '',
      side: form.rice?.value || '',
      vegetables: form.vegetables?.value || '',
      guests: guestCount,
      guestMealPreferences: []
    };

    for (let i = 1; i <= guestCount; i++) {
      data.guestMealPreferences.push({
        guestName: form['guestName' + i]?.value || '',
        guestMeal: form['guestMeal' + i]?.value || '',
        guestRice: form['guestRice' + i]?.value || '',
        guestVegetable: form['guestVegetable' + i]?.value || ''
      });
    }

    google.script.run
      .withSuccessHandler(() => {
        document.getElementById("loading").classList.add("hidden");
        document.getElementById("page2").classList.add("hidden");
        document.getElementById("thankYou").classList.remove("hidden");
      })
      .withFailureHandler(() => {
        document.getElementById("loading").classList.add("hidden");
        alert("Something went wrong. Please try again later.");
      })
      .submitRSVP(data);
  });

  function saveFormToLocalStorage() {
    const formData = new FormData(document.getElementById("rsvpForm"));
    const data = {};
    formData.forEach((value, key) => {
      data[key] = value;
    });
    localStorage.setItem("rsvpFormData", JSON.stringify(data));
  }

  function loadFormFromLocalStorage() {
    const savedData = JSON.parse(localStorage.getItem("rsvpFormData"));
    if (savedData) {
      Object.keys(savedData).forEach(key => {
        const input = document.querySelector(`[name="${key}"]`);
        if (input) {
          input.value = savedData[key];
          if (input.type === 'radio' && input.value === savedData[key]) {
            input.checked = true;
          }
        }
      });
    }
  }

  document.addEventListener("input", saveFormToLocalStorage);
  window.addEventListener("DOMContentLoaded", loadFormFromLocalStorage);

  function myFunction() {
    const menu = document.getElementById("myLinks");
    menu.classList.toggle("show");
  }
</script>

</body>
</html>
